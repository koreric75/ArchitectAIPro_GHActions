%% Generated by Architect AI Pro | BlueFalconInk LLC
%% https://architect-ai-pro-mobile-edition-484078543321.us-west1.run.app/
graph TD
    subgraph "BlueFalconInk LLC â€” ArchitectAIPro_GHActions Architecture"
        subgraph "External Systems"
            User[GitHub User]
            PublicInternet[Public Internet]
            GoogleGeminiAPI[Google Gemini API]
            GitHubAPI[GitHub API]
            Stripe[Stripe Payment Gateway]
        end

        subgraph "Security"
            WAF[AWS WAF]
            ALB[AWS Application Load Balancer]
            IAMOIDC[AWS IAM OIDC Provider]
            SecretsMgr[AWS Secrets Manager]
        end
        style Security fill:#1E40AF,color:#BFDBFE

        subgraph "CI/CD & Automation (GitHub Actions)"
            GHActions[GitHub Actions Workflow]
            DiagramGenerator[Architect AI Pro: generate_diagram.py]
            ForemanAudit[Foreman AI: foreman_audit.py]
            Remediation[Architect AI Pro: Remediation]
            TerraformCLI[Terraform CLI]
            GitAutoCommit[Git Auto-Commit]
        end
        style CI/CD & Automation (GitHub Actions) fill:#1E3A5F,color:#BFDBFE

        subgraph "Application (BlueFalconInk LLC Platform)"
            EKSCluster[AWS EKS Cluster]
            GalleryApp[Architecture Gallery - FastAPI Container]
        end
        style Application (BlueFalconInk LLC Platform) fill:#1E3A5F,color:#BFDBFE

        subgraph "Data & Storage"
            S3State[AWS S3: Terraform State Backend]
            S3Diagrams[AWS S3: Architecture Diagrams]
        end
        style Data & Storage fill:#0F172A,color:#BFDBFE

        subgraph "Payment (Conceptual Boundary)"
            PaymentBoundary[Payment Processing]
        end
        style Payment (Conceptual Boundary) fill:#7C3AED,color:#BFDBFE

        %% Data Flows
        User --> GHActions: Triggers Workflow (Push/PR)
        User --> PublicInternet: Accesses Gallery
        PublicInternet --> WAF: HTTP/S Traffic
        WAF --> ALB: Filters Requests
        ALB --> GalleryApp: Routes to Gallery

        GHActions -- Authenticates via --> IAMOIDC: OIDC Token
        IAMOIDC -- Grants Access to --> SecretsMgr: Read Secrets
        IAMOIDC -- Grants Access to --> S3State: Read/Write Terraform State
        IAMOIDC -- Grants Access to --> S3Diagrams: Read/Write Diagrams
        IAMOIDC -- Grants Access to --> EKSCluster: Deploy/Manage

        GHActions --> DiagramGenerator: Executes Script
        DiagramGenerator -- Reads Code from --> GitHubAPI: Repo Content
        DiagramGenerator -- Calls --> GoogleGeminiAPI: Generate Diagram
        DiagramGenerator -- Outputs Diagram to --> S3Diagrams: Store .md/.mermaid
        DiagramGenerator -- Passes Diagram to --> ForemanAudit: For Review

        ForemanAudit -- Reports Violations to --> Remediation: If Failed
        Remediation -- Calls --> GoogleGeminiAPI: Correct Diagram
        Remediation -- Updates Diagram in --> S3Diagrams: Store Corrected

        GHActions --> TerraformCLI: Executes IaC
        TerraformCLI -- Manages --> S3State: Terraform State
        TerraformCLI -- Provisions --> EKSCluster: Cluster
        TerraformCLI -- Provisions --> SecretsMgr: API Keys, Tokens
        TerraformCLI -- Provisions --> S3Diagrams: Buckets
        TerraformCLI -- Provisions --> IAMOIDC: WIF Setup

        GitAutoCommit -- Commits to --> GitHubAPI: docs/architecture.md

        GalleryApp -- Fetches Diagrams from --> S3Diagrams: For Display
        GalleryApp -- Fetches Repo Info from --> GitHubAPI: For Display
        GalleryApp -- Accesses GITHUB_TOKEN from --> SecretsMgr: For GitHub API

        SecretsMgr -- Stores --> Stripe: Keys
        PaymentBoundary -- Processes Payments via --> Stripe: API Calls (Conceptual)

        FOOTER[ğŸ—ï¸ Created with Architect AI Pro | BlueFalconInk LLC]
    end
    style FOOTER fill:#1E40AF,color:#BFDBFE,stroke:#3B82F6