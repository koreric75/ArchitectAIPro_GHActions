%% Generated by Architect AI Pro | BlueFalconInk LLC
%% https://architect-ai-pro-mobile-edition-484078543321.us-west1.run.app/
graph TD
    subgraph "BlueFalconInk LLC - ArchitectAIPro_GHActions Architecture"
        style BlueFalconInk LLC - ArchitectAIPro_GHActions Architecture fill:#1E3A5F,color:#BFDBFE

        subgraph "External Actors"
            User[External User/Developer]
        end

        subgraph "GitHub Platform"
            GitHub[GitHub Repositories]
            GHActions[GitHub Actions CI/CD]
            GHActionsSecrets[GitHub Actions Secrets]
            GHAPI[GitHub API]
        end

        subgraph "CI/CD & Automation"
            subgraph "Architect AI Pro Pipeline"
                AIGenerator[AI Diagram Generator]
                Foreman[Foreman AI Audit Engine]
                Remediator[AI Remediation Loop]
                DrawIO[Draw.io CLI]
            end

            subgraph "CHAD Operations"
                CHADAgents[CHAD Audit & Cleanup Agents]
            end

            subgraph "Security Scans"
                SASTDepScan[SAST & Dependency Scanners]
                TrivyScan[Trivy Container Scanner]
            end

            subgraph "Infrastructure Deployment"
                Terraform[Terraform IaC]
            end
        end

        subgraph "AI Services"
            GeminiAPI[Google Gemini API]
        end

        subgraph "GCP Infrastructure"
            subgraph "Application Services"
                CHADDashboard[CHAD Dashboard - Cloud Run]
                ArchGallery[Architecture Gallery - Cloud Run]
            end
            subgraph "Data & Artifacts"
                style Data & Artifacts fill:#0F172A,color:#BFDBFE
                ArtifactRegistry[GCP Artifact Registry]
                GCPSecretManager[GCP Secret Manager]
            end
            subgraph "Platform Services"
                CloudBuild[GCP Cloud Build]
                CloudRun[GCP Cloud Run Platform]
                GCPWIF[GCP Workload Identity Federation]
                CloudCDN[GCP Cloud CDN]
            end
        end

        subgraph "Security"
            style Security fill:#1E40AF,color:#BFDBFE
            CloudArmor[Cloud Armor]
            LoadBalancer[GCP Load Balancer]
        end

        %% Data Flows
        User -->|Code Push/PR| GitHub
        User -->|View Dashboard| LoadBalancer
        User -->|View Gallery| LoadBalancer

        GitHub -->|Code Changes Trigger| GHActions
        GHActions -->|Access Secrets| GHActionsSecrets
        GHActionsSecrets -->|Provide Credentials| GCPWIF
        GHActionsSecrets -->|Provide API Key| GeminiAPI
        GHActionsSecrets -->|Provide Token| GHAPI

        %% Architect AI Pro Pipeline
        GHActions -->|Run generate_diagram.py| AIGenerator
        AIGenerator -->|AI Request| GeminiAPI
        GeminiAPI -->|Mermaid.js Output| AIGenerator
        AIGenerator -->|Render PNG/Draw.io| DrawIO
        DrawIO -->|Rendered Files| AIGenerator
        AIGenerator -->|Audit Request| Foreman
        Foreman -->|Audit Report| GHActions
        GHActions -->|Remediation Trigger| Remediator
        Remediator -->|Remediation Prompt| GeminiAPI
        GeminiAPI -->|Corrected Diagram| Remediator
        Remediator -->|Update Diagram Files| GitHub
        AIGenerator -->|Commit Diagrams| GitHub

        %% CHAD Operations
        GHActions -->|Run CHAD Scripts| CHADAgents
        CHADAgents -->|Fetch Repo Data| GHAPI
        CHADAgents -->|Audit Reports/HTML| GitHub (Artifacts)
        CHADAgents -->|Modify Repos| GHAPI
        CHADAgents -->|Trigger Refresh| CHADDashboard

        %% Security Scans
        GHActions -->|Run SAST/Dep Scan| SASTDepScan
        SASTDepScan -->|Scan Code| GitHub
        GHActions -->|Build Image| CloudBuild
        CloudBuild -->|Scan Image| TrivyScan
        TrivyScan -->|Vulnerability Report| CloudBuild

        %% Infrastructure Deployment
        GHActions -->|Terraform Apply| Terraform
        Terraform -->|Auth via WIF| GCPWIF
        GCPWIF -->|Provision Resources| CloudRun
        GCPWIF -->|Manage Artifacts| ArtifactRegistry
        GCPWIF -->|Manage Secrets| GCPSecretManager

        %% Cloud Build & Deployment
        CloudBuild -->|Build Docker Image| ArtifactRegistry
        ArtifactRegistry -->|Push Image| CloudBuild
        CloudBuild -->|Deploy Service| CloudRun

        %% Application Services
        LoadBalancer -->|HTTPS Traffic| CHADDashboard
        LoadBalancer -->|HTTPS Traffic| ArchGallery
        LoadBalancer -->|Content Delivery| CloudCDN
        CloudCDN -->|Serves Static Assets| CHADDashboard
        CloudCDN -->|Serves Static Assets| ArchGallery
        CHADDashboard -->|Fetch Audit Data| GHAPI
        CHADDashboard -->|Access Secrets| GCPSecretManager
        ArchGallery -->|Fetch Repo Content| GHAPI
        ArchGallery -->|Access Secrets| GCPSecretManager

        %% Security Layer
        CloudArmor -->|WAF/DDoS Protection| LoadBalancer

    end

    FOOTER[ğŸ—ï¸ Created with Architect AI Pro Â· BlueFalconInk LLC]
    style FOOTER fill:#1E40AF,color:#BFDBFE,stroke:#3B82F6